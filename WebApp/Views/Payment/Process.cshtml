@model WebApp.ViewModels.PaymentFormViewModel﻿
@{
    ViewData["Title"] = "Confirm Payment";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<link rel="stylesheet" href="~/css/cart.css" />

<div class="container-cart">
    <h1 class="cart-title">Confirm Payment</h1>

    <form method="post" asp-controller="Payment" asp-action="Process" class="checkout-form" style="max-width:600px;margin:auto
          @Html.AntiForgeryToken()
        <div style="margin-bottom:20px;">
            <label for="paymentMethod" style="font-weight:bold;color:var(--primary-color);">Payment Method</label>
            <select name="method" id="paymentMethod">
                <option value="Cash">Cash</option>
                <option value="Card">Card</option>
            </select>
        </div>

        <div id="cardFields" style="display:none;">
            <div style="margin-bottom:20px;">
                <label style="font-weight:bold;color:var(--primary-color);">Cardholder Name</label>
                <input name="CardholderName" class="quantity-input" style="width:100%;" />
            </div>

            <div style="margin-bottom:20px;">
                <label style="font-weight:bold;color:var(--primary-color);">Card Number</label>
                <input name="CardNumber" class="quantity-input" style="width:100%;" />
            </div>
            <input type="hidden" asp-for="TableId" />
            <input type="hidden" asp-for="TotalAmount" />
            <div style="display:flex;gap:20px;margin-bottom:20px;">
                <div style="flex:1;">
                    <label style="font-weight:bold;color:var(--primary-color);">Expiration (MM/YY)</label>
                    <input name="Expiration" class="quantity-input" style="width:100%;" />
                </div>
                <div style="flex:1;">
                    <label style="font-weight:bold;color:var(--primary-color);">CVV</label>
                    <input name="Cvv" class="quantity-input" style="width:100%;" />
                </div>
            </div>
        </div>

        <button type="submit" class="submit-btn">Pay now!</button>
        </br>
        <a href="@Url.Action("Index", "Cart")" class="continue-shopping">Back to Cart</a>
    </form>
</div>

@section Scripts {
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const methodSelect = document.getElementById("paymentMethod");
            const cardFields = document.getElementById("cardFields");

            methodSelect.addEventListener("change", function () {
                cardFields.style.display = (this.value === "Card") ? "block" : "none";
            });
            cardFields.style.display = (methodSelect.value === "Card") ? "block" : "none";
        });
    </script>
}